# Next.js 프론트엔드 구현 계획

## 🎯 목표
기존 정적 UI를 완성된 FastAPI 백엔드와 연동하여 실시간 주식 거래 시스템 구현 + 최신 디자인 트렌드 적용

## 📋 현재 상황 분석

### ✅ 완료된 것들
- **Backend API**: 30+ REST 엔드포인트, WebSocket 실시간 통신 완료
- **Frontend UI**: Next.js 15.5.2 기반 정적 UI 구현 완료 (shadcn/ui 사용)
- **UI 컴포넌트**: 매수/매도 조건 설정, 계좌 정보, 워치리스트 테이블 구조 완성

### 🚧 구현이 필요한 것들
- **API 클라이언트**: REST API 호출 및 WebSocket 연결 관리
- **상태 관리**: React hooks 기반 실시간 데이터 관리  
- **데이터 연동**: 정적 UI를 실제 백엔드 데이터와 연결
- **실시간 업데이트**: WebSocket을 통한 가격/계좌 정보 실시간 반영
- **모던 UI/UX**: 최신 디자인 트렌드 적용 및 사용자 경험 개선

## 🎨 현재 디자인 문제점 및 개선 방향

### 현재 문제점
- **구식 레이아웃**: 전통적인 3단 분할, 딱딱한 테이블 구조
- **시각적 밀도**: 정보가 과도하게 압축되어 가독성 저하
- **모던 UI 요소 부족**: 카드 디자인은 있지만 너무 단조로움
- **색상 활용 부족**: 회색 위주의 단조로운 색상 팔레트
- **인터랙션 피드백 부족**: 호버, 포커스 등 사용자 피드백 부족

### 최신 디자인 트렌드 적용
1. **Dashboard-First 접근법**: 카드 기반 모듈러 디자인
2. **데이터 시각화 강화**: 차트 통합, 실시간 인디케이터
3. **모던 인터랙션 패턴**: Floating Action Button, 애니메이션
4. **반응형 디자인**: 데스크톱/태블릿/모바일 최적화

## 📱 새로운 화면 구성

### Desktop Layout (1920x1080 기준)
```
┌─────────────────────────────────────────────────────────────────────────────────┐
│ ╔═══════════════════════════════════════════════════════════════════════════════╗ │
│ ║  🏛️ 한국투자증권 | Smart Trading Dashboard    [🔔] [⚙️] [👤]  ║ │
│ ╚═══════════════════════════════════════════════════════════════════════════════╝ │
├─────────────────────────────────────────────────────────────────────────────────┤
│ ┌─────────────────┐ ┌─────────────────────────────────────────────────────────┐ │
│ │   💰 Portfolio   │ │              📊 Market Overview                         │ │
│ │                 │ │  ┌─────────┬─────────┬─────────┬─────────┬─────────┐   │ │
│ │ 총 자산          │ │  │ KOSPI   │ KOSDAQ  │ USD/KRW │ Gold    │ Bitcoin │   │ │
│ │ ₩1,234,567     │ │  │ ▲2,456  │ ▼ 789   │ ▲1,234  │ ▲56.78  │ ▼9,876  │   │ │
│ │                 │ │  │ +1.2%   │ -0.8%   │ +0.3%   │ +2.1%   │ -3.4%   │   │ │
│ │ 일일 손익        │ │  └─────────┴─────────┴─────────┴─────────┴─────────┘   │ │
│ │ +₩45,678       │ │                                                         │ │
│ │ (+3.84%) 📈     │ │                                                         │ │
│ └─────────────────┘ └─────────────────────────────────────────────────────────┘ │
├─────────────────────────────────────────────────────────────────────────────────┤
│ ┌───────────────────────────┐ ┌───────────────────────────────────────────────┐ │
│ │    🎯 Trading Conditions  │ │          📈 Active Positions                  │ │
│ │                           │ │                                               │ │
│ │ ┌─── 매수 조건 ────────┐   │ │ ┌─────────────────────────────────────────┐ │ │
│ │ │ 💵 Amount: ₩100,000   │   │ │ │ Stock│Qty │Entry│Current│P&L  │Chart│⚡│ │ │
│ │ │ 📊 MACD: 상향돌파     │   │ │ │ 삼성 │ 10 │67800│ 69300 │+2.2%│ 📊 │🔔│ │ │
│ │ │ 📈 RSI: > 30         │   │ │ │ LG화학│ 5  │61만 │ 62만  │+1.6%│ 📊 │🔕│ │ │
│ │ │ [🔄 Auto Trade: ON]   │   │ │ │ 카카오│ 15 │45000│ 45200 │+0.4%│ 📊 │🔔│ │ │
│ │ └───────────────────────┘   │ │ └─────────────────────────────────────────┘ │ │
│ │                           │ │                                               │ │
│ │ ┌─── 매도 조건 ────────┐   │ │ [+ Add Position] [⚙️ Settings] [📊 Analytics] │ │
│ │ │ 📊 MACD: 하향돌파     │   │ │                                               │ │
│ │ │ 📈 RSI: < 70         │   │ │                                               │ │
│ │ │ 🛡️ Stop Loss: -5%    │   │ │                                               │ │
│ │ │ 🎯 Take Profit: +10% │   │ │                                               │ │
│ │ └───────────────────────┘   │ │                                               │ │
│ └───────────────────────────┘ └───────────────────────────────────────────────┘ │
├─────────────────────────────────────────────────────────────────────────────────┤
│ ┌─────────────────────────────────────────────────────────────────────────────┐ │
│ │                    📋 Watchlist & Market Scanner                            │ │
│ │ ┌─ Watchlist ─┐ ┌─ Top Gainers ─┐ ┌─ Most Active ─┐ ┌─ Technical ─┐      │ │
│ │ │Stock  │Price│ │삼성전자│+5.2%│ │LG화학  │1.2M │ │RSI>80 │MACD▲│      │ │
│ │ │삼성전자│67,800│ │SK하이닉│+3.8%│ │카카오  │956K │ │삼성전자│카카오│      │ │
│ │ │LG화학 │612,000│ │네이버  │+2.1%│ │네이버  │743K │ │LG화학 │네이버│      │ │
│ │ │카카오 │45,250│ │카카오  │+1.9%│ │삼성전자│689K │ │SK하이닉│포스코│      │ │
│ │ │🔔⚡📊│ 실시간│ │실시간업데이트│ │실시간업데이트│ │실시간업데이트│      │ │
│ │ └──────┴─────┘ └────────┴────┘ └────────┴────┘ └───────┴─────┘      │ │
│ └─────────────────────────────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────────────────────────────┘
  [🚀 Quick Buy] [📉 Quick Sell] [📊 Chart View] [📈 Analytics] [⚙️ Settings]
```

### Mobile Layout (375x812 기준)
```
┌─────────────────────────────────┐
│ ╔═════════════════════════════╗ │
│ ║ 🏛️ Smart Trading    [☰] [🔔] ║ │
│ ╚═════════════════════════════╝ │
├─────────────────────────────────┤
│ ┌─ Portfolio Summary ─────────┐ │
│ │ 💰 ₩1,234,567              │ │
│ │ 📈 +₩45,678 (+3.84%)       │ │
│ │ ├─ Stocks: 85%    🟢🟢🟢▫▫ │ │
│ │ ├─ Cash: 15%      🔵▫▫▫▫   │ │
│ │ └─ P&L: Today +3.8% 📈     │ │
│ └─────────────────────────────┘ │
├─────────────────────────────────┤
│ [Portfolio] [Watchlist] [Trade] │ <- Tab Navigation
├─────────────────────────────────┤
│ ┌─ Active Positions ──────────┐ │
│ │ 삼성전자│ 10 │ +2.2% │ 📊 │🔔│ │
│ │ LG화학 │ 5  │ +1.6% │ 📊 │🔕│ │
│ │ 카카오  │ 15 │ +0.4% │ 📊 │🔔│ │
│ │ [+ Add] [⚙️] [📊] [⚡Buy]   │ │
│ └─────────────────────────────┘ │
├─────────────────────────────────┤
│ ┌─ Quick Actions ─────────────┐ │
│ │ [🚀 Buy] [📉 Sell] [📊View]  │ │
│ │ [⚙️ Conditions] [📈 Chart]   │ │
│ └─────────────────────────────┘ │
├─────────────────────────────────┤
│ ┌─ Market Alerts ─────────────┐ │
│ │ 🔔 삼성전자 reached target   │ │
│ │ ⚠️ LG화학 RSI overbought    │ │
│ │ 📈 KOSPI +1.2% today        │ │
│ └─────────────────────────────┘ │
└─────────────────────────────────┘
```

## 🔧 구현 단계

### Phase 1: 디자인 시스템 구축 (1일)
1. **색상 팔레트 정의**
   ```typescript
   const tradingColors = {
     // Primary Brand
     primary: '#3B82F6',      // Blue
     secondary: '#8B5CF6',    // Purple
     
     // Trading Colors
     bullish: '#10B981',      // Green (상승)
     bearish: '#EF4444',      // Red (하락)
     neutral: '#6B7280',      // Gray (변화없음)
     warning: '#F59E0B',      // Amber (경고)
     
     // Background
     background: '#F8FAFC',   // Light gray
     surface: '#FFFFFF',      // White
     surfaceAlt: '#F1F5F9',   // Light blue-gray
   }
   ```

2. **타이포그래피 시스템**
   - Inter, Pretendard 폰트 적용
   - 일관된 텍스트 크기 체계
   - 숫자 전용 모노스페이스 폰트

3. **컴포넌트 디자인 토큰**
   - 그림자, 둥근 모서리, 간격 등 통일

### Phase 2: API 클라이언트 구축 (1일)
1. **API 클라이언트 구현** (`lib/api-client.ts`)
   - REST API 호출 함수들 (계좌, 매매조건, 워치리스트)
   - WebSocket 연결 관리 클래스
   - 에러 핸들링 및 재연결 로직

2. **TypeScript 타입 정의** (`lib/types.ts`)  
   - 백엔드 API 응답과 일치하는 인터페이스 정의
   - 매수/매도 조건, 계좌 정보, 워치리스트 아이템 타입

### Phase 3: 상태 관리 구현 (1일)
1. **React Hooks 구현** (`hooks/`)
   - `useRealtimeData`: WebSocket 실시간 데이터 관리
   - `useTradingConditions`: 매수/매도 조건 상태 관리
   - `useAccountData`: 계좌 정보 상태 관리

2. **커스텀 훅 최적화**
   - React.memo, useMemo, useCallback 활용
   - 불필요한 리렌더링 방지

### Phase 4: 모던 UI 컴포넌트 구현 (2일)
1. **대시보드 레이아웃 구현**
   - CSS Grid 기반 반응형 레이아웃
   - 카드 기반 모듈러 디자인
   - 헤더 및 네비게이션 개선

2. **개별 컴포넌트 구현**
   ```typescript
   // components/
   ├── TradingConditions.tsx    # 매수/매도 조건 카드
   ├── PortfolioSummary.tsx     # 포트폴리오 요약 카드
   ├── MarketOverview.tsx       # 시장 현황 위젯
   ├── ActivePositions.tsx      # 보유 종목 테이블
   ├── WatchlistPanel.tsx       # 워치리스트 탭 패널
   ├── TradingControls.tsx      # 매매 제어 버튼
   └── PriceDisplay.tsx         # 가격 표시 컴포넌트
   ```

### Phase 5: 데이터 연동 및 실시간 기능 (1일)
1. **정적 데이터를 동적 데이터로 교체**
   - 계좌 정보 테이블에 실제 API 데이터 연결
   - 워치리스트 테이블에 실시간 데이터 연결
   - 매수/매도 조건 폼을 백엔드 API와 연결

2. **실시간 업데이트 구현**
   - WebSocket 메시지에 따른 UI 자동 업데이트
   - 가격 변동 시각적 표시 (색상 변화, 애니메이션)

### Phase 6: 인터랙션 및 애니메이션 (1일)
1. **마이크로 인터랙션**
   - 가격 변동 countUp 애니메이션
   - 버튼 호버 효과
   - 카드 호버 글로우 효과

2. **로딩 및 상태 표시**
   - 스켈레톤 로딩
   - 연결 상태 인디케이터
   - 에러/성공 피드백

## 🛠 주요 구현 파일 구조

```
stock-trading-ui/src/
├── lib/
│   ├── api-client.ts          # API 클라이언트 클래스
│   ├── types.ts              # TypeScript 타입 정의
│   ├── websocket.ts          # WebSocket 관리
│   └── constants.ts          # 디자인 토큰, 상수
├── hooks/
│   ├── useRealtimeData.ts    # 실시간 데이터 훅
│   ├── useTradingConditions.ts # 매매조건 훅
│   ├── useAccountData.ts     # 계좌정보 훅
│   └── useWebSocket.ts       # WebSocket 연결 훅
├── components/
│   ├── ui/                   # shadcn/ui 기본 컴포넌트
│   ├── layout/
│   │   ├── Header.tsx        # 상단 헤더
│   │   ├── Sidebar.tsx       # 사이드바 (모바일용)
│   │   └── Layout.tsx        # 메인 레이아웃
│   ├── trading/
│   │   ├── TradingConditions.tsx
│   │   ├── PortfolioSummary.tsx
│   │   ├── MarketOverview.tsx
│   │   ├── ActivePositions.tsx
│   │   ├── WatchlistPanel.tsx
│   │   ├── TradingControls.tsx
│   │   └── PriceDisplay.tsx
│   └── common/
│       ├── LoadingSpinner.tsx
│       ├── ErrorBoundary.tsx
│       └── ConnectionStatus.tsx
└── app/
    ├── globals.css           # 글로벌 스타일
    ├── layout.tsx           # 루트 레이아웃
    └── page.tsx             # 메인 페이지
```

## 🎨 디자인 컴포넌트 상세

### 1. 가격 표시 컴포넌트
```
┌─────────────────────────┐
│ 삼성전자                 │
│ ₩69,300  ▲ +1,500 (+2.2%) │
│ ████████████░░░ 78%     │ <- RSI 시각화 바
│ [📊] [🔔] [⚡Buy] [📉Sell] │
└─────────────────────────┘
```

### 2. 트레이딩 조건 카드
```
┌─────────────────────────┐
│ 🎯 Buy Conditions       │
│ ┌─ Amount ─────────────┐ │
│ │ ₩ [100,000      ] 💰 │ │
│ └───────────────────────┘ │
│ ┌─ MACD ───────────────┐ │
│ │ [상향돌파 ▼] ⚡ Active │ │
│ └───────────────────────┘ │
│ ┌─ RSI ────────────────┐ │
│ │ [30] > [▼] 📈 Ready  │ │
│ └───────────────────────┘ │
│ [🔄 Auto: ON] [⚙️ Edit] │
└─────────────────────────┘
```

### 3. 실시간 데이터 테이블
```
┌─────────────────────────────────────────┐
│ Stock    │ Price    │ Change │ Actions │
├─────────────────────────────────────────┤
│ 삼성전자  │ ₩69,300  │ 📈+2.2% │ 📊 🔔 ⚡ │
│ LG화학   │ ₩620,000 │ 📉-1.3% │ 📊 🔕 📉 │
│ 카카오    │ ₩45,200  │ 📈+0.4% │ 📊 🔔 ⚡ │
└─────────────────────────────────────────┘
      ↑ 실시간 색상 변화 애니메이션
```

## 📊 데이터 시각화 개선

### 1. 포트폴리오 건강도 위젯
```
┌─── Portfolio Health ────┐
│ 📊 Diversification      │
│ ████████░░ 80%          │
│                         │
│ 💰 Risk Score           │
│ ██████░░░░ 60%          │
│                         │
│ ⚡ Active Trades        │
│ ████████████ 12/15      │
└─────────────────────────┘
```

### 2. 시장 현황 대시보드
```
┌─ Market Overview ───────────────────────┐
│ KOSPI    │ KOSDAQ   │ USD/KRW │ Gold   │
│ ▲2,456   │ ▼ 789    │ ▲1,234  │ ▲56.78 │
│ +1.2%    │ -0.8%    │ +0.3%   │ +2.1%  │
│ 🟢        │ 🔴        │ 🟢       │ 🟢      │
└─────────────────────────────────────────┘
```

## ⚡ 성능 최적화

### 1. React 최적화
- React.memo로 불필요한 리렌더링 방지
- useMemo로 복잡한 계산 메모이제이션
- useCallback으로 함수 레퍼런스 안정화
- 테이블 가상화 (대량 데이터 시)

### 2. WebSocket 최적화
- 메시지 배치 처리
- 연결 재시도 로직
- 백그라운드 연결 관리

### 3. 애니메이션 최적화
- CSS transforms 사용 (GPU 가속)
- 애니메이션 프레임 최적화
- 메모리 누수 방지

## 🔒 보안 고려사항
- 환경변수로 API URL 관리
- CORS 설정 확인
- 민감한 정보 로컬 저장 방지
- XSS 방지를 위한 데이터 sanitization

## 🧪 테스트 전략

### 1. 단위 테스트
- API 클라이언트 함수 테스트
- React 훅 테스트
- 유틸리티 함수 테스트

### 2. 통합 테스트
- WebSocket 연결 및 메시지 처리 테스트
- API 호출 및 응답 처리 테스트

### 3. E2E 테스트
- 실제 사용자 플로우 테스트
- 실시간 데이터 업데이트 테스트

## 📈 기대 효과
- **직관적 UI**: 현대적 디자인으로 사용자 경험 대폭 개선
- **실시간 반응성**: WebSocket 기반 즉각적인 데이터 업데이트
- **접근성**: 웹 기반으로 어디서나 접근 가능
- **확장성**: 모바일 앱, 다중 사용자 지원 용이
- **유지보수성**: 모던 웹 기술 스택으로 개발 생산성 향상

## 🚀 배포 준비

### 환경별 설정
```typescript
// .env.local (개발)
NEXT_PUBLIC_API_URL=http://localhost:8000
NEXT_PUBLIC_WS_URL=ws://localhost:8000/ws

// .env.production (프로덕션)
NEXT_PUBLIC_API_URL=https://api.yourdomain.com
NEXT_PUBLIC_WS_URL=wss://api.yourdomain.com/ws
```

### Docker 설정
```dockerfile
FROM node:18-alpine
WORKDIR /app
COPY package*.json ./
RUN npm ci --only=production
COPY . .
RUN npm run build
EXPOSE 3000
CMD ["npm", "start"]
```

이 계획을 통해 기존 PyQt5 시스템의 모든 기능을 현대적인 웹 환경에서 구현하고, 뛰어난 사용자 경험을 제공하는 트레이딩 플랫폼을 구축할 수 있습니다.